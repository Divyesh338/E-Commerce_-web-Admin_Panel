<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-white">
                    <h5 class="mb-0 fw-bold">Add Product</h5>
                </div>

                <div class="card-body">
                    <div class="row product-adding">

                        <!-- IMAGE UPLOAD SECTION (UNCHANGED) -->
                        <div class="col-xl-5">
                            <div class="add-product">
                                <div class="row">
                                    <div class="col-xl-9 xl-50 col-sm-6 col-9">
                                        <img alt="image banner" [src]="bigImage" class="img-fluid image_zoom_1">
                                    </div>
                                    <div class="col-xl-3 xl-50 col-sm-6 col-3">
                                        <ul class="file-upload-product">
                                            <li *ngFor="let item of images; let i=index">
                                                <div class="box-input-file">
                                                    <input class="upload" type="file" #file
                                                        (change)="upload(file.files, i)" />
                                                    <img class="imgUpload" [src]="item.img" />
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- FORM SECTION -->
                        <div class="col-xl-7">
                            <form [formGroup]="addForm" (ngSubmit)="Submit()">
                                <div class="row g-3">

                                    <!-- Name -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Name <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" formControlName="name"
                                            [ngClass]="{'is-invalid': submitted && ctrl['name'].errors}">
                                        <div class="invalid-feedback" *ngIf="submitted && ctrl['name'].errors">
                                            {{ validationMessage['name']['required'] }}
                                        </div>
                                    </div>

                                    <!-- Title -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Title <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" formControlName="title"
                                            [ngClass]="{'is-invalid': submitted && ctrl['title'].errors}">
                                        <div class="invalid-feedback" *ngIf="submitted && ctrl['title'].errors">
                                            {{ validationMessage['title']['required'] }}
                                        </div>
                                    </div>

                                    <!-- Code -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Code <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" formControlName="code"
                                            [ngClass]="{'is-invalid': submitted && ctrl['code'].errors}">
                                        <div class="invalid-feedback" *ngIf="submitted && ctrl['code'].errors">
                                            {{ validationMessage['code']['required'] }}
                                        </div>
                                    </div>

                                    <!-- Price -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Price <span class="text-danger">*</span></label>
                                        <input type="number" class="form-control" formControlName="price"
                                            [ngClass]="{'is-invalid': submitted && ctrl['price'].errors}">
                                        <div class="invalid-feedback" *ngIf="submitted && ctrl['price'].errors">
                                            {{ validationMessage['price']['required'] }}
                                        </div>
                                    </div>

                                    <!-- Sale Price -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Sale Price <span class="text-danger">*</span></label>
                                        <input type="number" class="form-control" formControlName="salePrice"
                                            [ngClass]="{'is-invalid': submitted && ctrl['salePrice'].errors}">
                                        <div class="invalid-feedback" *ngIf="submitted && ctrl['salePrice'].errors">
                                            {{ validationMessage['salePrice']['required'] }}
                                        </div>
                                    </div>

                                    <!-- Discount -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Discount <span class="text-danger">*</span></label>
                                        <input type="number" class="form-control" formControlName="discount"
                                            [ngClass]="{'is-invalid': submitted && ctrl['discount'].errors}">
                                        <div class="invalid-feedback" *ngIf="submitted && ctrl['discount'].errors">
                                            {{ validationMessage['discount']['required'] }}
                                        </div>
                                    </div>

                                    <!-- Size -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Size <span class="text-danger">*</span></label>
                                        <select class="form-select" formControlName="sizeId"
                                            [ngClass]="{'is-invalid': submitted && ctrl['sizeId'].errors}">
                                            <option value="">--Select Size--</option>
                                            <option *ngFor="let size of objSizes" [value]="size.id">{{ size.name }}</option>
                                        </select>
                                    </div>

                                    <!-- Category -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Category <span class="text-danger">*</span></label>
                                        <select class="form-select" formControlName="categoryId"
                                            [ngClass]="{'is-invalid': submitted && ctrl['categoryId'].errors}">
                                            <option value="">--Select Category--</option>
                                            <option *ngFor="let ct of objCategories" [value]="ct.id">{{ ct.name }}</option>
                                        </select>
                                    </div>

                                    <!-- Tag -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Tag <span class="text-danger">*</span></label>
                                        <select class="form-select" formControlName="tagId"
                                            [ngClass]="{'is-invalid': submitted && ctrl['tagId'].errors}">
                                            <option value="">--Select Tag--</option>
                                            <option *ngFor="let tag of objTags" [value]="tag.id">{{ tag.name }}</option>
                                        </select>
                                    </div>

                                    <!-- Color -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Color <span class="text-danger">*</span></label>
                                        <select class="form-select" formControlName="colorId"
                                            [ngClass]="{'is-invalid': submitted && ctrl['colorId'].errors}">
                                            <option value="">--Select Color--</option>
                                            <option *ngFor="let color of objColors" [value]="color.id">{{ color.name }}</option>
                                        </select>
                                    </div>

                                    <!-- Quantity -->
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold">Total Products</label>
                                        <div class="input-group qty-group">
                                            <button type="button" class="btn btn-outline-secondary" (click)="decrement()">-</button>
                                            <input type="text" class="form-control text-center" formControlName="quantity" readonly>
                                            <button type="button" class="btn btn-outline-secondary" (click)="increment()">+</button>
                                        </div>
                                    </div>

                                    <!-- Is Sale -->
                                    <div class="col-md-6 d-flex align-items-center mt-2">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" formControlName="isSale">
                                            <label class="form-check-label">Mark as Sale</label>
                                        </div>
                                    </div>

                                    <!-- Is New -->
                                    <div class="col-md-6 d-flex align-items-center mt-2">
                                        <div class="form-check form-switch">
                                            <input class="form-check-input" type="checkbox" formControlName="isNew">
                                            <label class="form-check-label">Mark as New</label>
                                        </div>
                                    </div>

                                    <!-- Short Details -->
                                    <div class="col-12">
                                        <label class="form-label fw-semibold">Short Details</label>
                                        <textarea rows="4" class="form-control" formControlName="shortDetails"></textarea>
                                    </div>

                                    <!-- Description -->
                                    <div class="col-12">
                                        <label class="form-label fw-semibold">Description</label>
                                        <ckeditor formControlName="description"></ckeditor>
                                    </div>

                                </div>

                                <!-- BUTTONS -->
                                <div class="mt-4 d-flex gap-3">
                                    <button type="submit" class="btn btn-primary">{{ buttonText }}</button>
                                    <button type="button" class="btn btn-outline-secondary" (click)="cancelForm()">Cancel</button>
                                </div>

                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
