"use strict";(self.webpackChunkAlibaba_Pro=self.webpackChunkAlibaba_Pro||[]).push([[950],{7950:(X,A,u)=>{u.r(A),u.d(A,{ProductsModule:()=>W});var b=u(6895),_=u(3599),g=u(2340),S=u(5226),q=u.n(S),t=u(1571),P=u(4691),Z=u(7359),v=u(9585);function x(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){const e=t.CHM(n).row,s=t.oxw();return t.KtG(s.edit(e.id))}),t.qZA(),t.TgZ(1,"button",19),t.NdJ("click",function(){const e=t.CHM(n).row,s=t.oxw();return t.KtG(s.deleteData(e.id))}),t.qZA()}}let U=(()=>{const r=class{constructor(i,a,e){this._http=i,this._toaster=a,this._router=e,this.objRows=[]}ngOnInit(){this.getData()}getData(){this._http.get(g.N.BASE_API_PATH+"ProductMaster/GetAll").subscribe(i=>{i.isSuccess?this.objRows=i.data:this._toaster.error(i.errors[0],"Product List")})}edit(i){this._router.navigate(["/products/manage/add-product"],{queryParams:{productId:i}})}deleteData(i){let a={id:i};const e=q().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});this._http.post(g.N.BASE_API_PATH+"ProductMaster/Delete/",a).subscribe(s=>{s.isSuccess?(e.fire("Deleted!","Your record has been deleted.","success"),this._toaster.success("Record Deleted Successfully","Product List"),this.getData()):this._toaster.error(s.errors[0],"Product List")})}};let o=r;return r.\u0275fac=function(a){return new(a||r)(t.Y36(P.O),t.Y36(Z._W),t.Y36(_.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-list"]],decls:21,vars:6,consts:[[1,"container-fluid"],[1,"card"],[1,"col-sm-12"],[1,"card-header"],[1,"card-body"],[1,"btn-popup","pull-right"],["routerLink","/products/manage/add-product",1,"btn","btn-secondary"],["id","batchDelete",1,"category-table","custom-datatable","transaction-datatable","useimage"],[1,"table","responsive"],[1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit"],["name","Name"],["name","Title"],["name","Code"],["name","Price"],["name","Sale Price"],["name","created Data","prop","createdOn"],["name","Actions"],["ngx-datatable-cell-template",""],["type","button",1,"action-btn","edit-btn","fa-solid","fa-pen-to-square",3,"click"],["type","button",1,"action-btn","delete-btn","fa-solid","fa-trash",3,"click"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),t._uU(5,"Product List"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"a",6),t._uU(9," Add Product "),t.qZA()(),t.TgZ(10,"div",7)(11,"div",8)(12,"ngx-datatable",9),t._UZ(13,"ngx-datatable-column",10)(14,"ngx-datatable-column",11)(15,"ngx-datatable-column",12)(16,"ngx-datatable-column",13)(17,"ngx-datatable-column",14)(18,"ngx-datatable-column",15),t.TgZ(19,"ngx-datatable-column",16),t.YNc(20,x,2,0,"ng-template",17),t.qZA()()()()()()()()),2&a&&(t.xp6(12),t.Q6J("rows",e.objRows)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",5))},dependencies:[_.rH,v.nE,v.UC,v.vq],styles:[".action-btn[_ngcontent-%COMP%]{background:transparent;border:none;cursor:pointer;padding:4px 6px;font-size:16px;display:inline-flex;align-items:center}.action-btn[_ngcontent-%COMP%]:hover{opacity:.8}.action-btn.edit-btn[_ngcontent-%COMP%]{color:#28a745}.action-btn.delete-btn[_ngcontent-%COMP%]{color:#dc3545}"]}),o})();var C,d=u(433),f=u(6211),h=u(9483);function T(o,r){o.onload=function(){this.onerror=this.onload=null,r(null,o)},o.onerror=function(){this.onerror=this.onload=null,r(new Error("Failed to load "+this.src),o)}}function N(o,r){o.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,r(null,o))}}function y(o,r){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof o||o.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(C||(C=y.scriptLoader(o).then(function(n){return r&&r(n),n})),C)}function F(o,r){}y.scriptLoader=function(o){return new Promise(function(r,n){!function w(o,r,n){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof r&&(n=r,r={}),n=n||function(){},a.type=(r=r||{}).type||"text/javascript",a.charset=r.charset||"utf8",a.async=!("async"in r)||!!r.async,a.src=o,r.attrs&&function O(o,r){for(var n in r)o.setAttribute(n,r[n])}(a,r.attrs),r.text&&(a.text=String(r.text)),("onload"in a?T:N)(a,n),a.onload||T(a,n),i.appendChild(a)}(o,function(i){return C=void 0,i?n(i):window.CKEDITOR?void r(CKEDITOR):n(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))})})};let M=(()=>{class o{constructor(n,i){this.elementRef=n,this.ngZone=i,this.editorUrl="https://cdn.ckeditor.com/4.25.1-lts/standard-all/ckeditor.js",this.tagName="textarea",this.type="classic",this.namespaceLoaded=new t.vpe,this.ready=new t.vpe,this.dataReady=new t.vpe,this.change=new t.vpe,this.dataChange=new t.vpe,this.dragStart=new t.vpe,this.dragEnd=new t.vpe,this.drop=new t.vpe,this.fileUploadResponse=new t.vpe,this.fileUploadRequest=new t.vpe,this.focus=new t.vpe,this.paste=new t.vpe,this.afterPaste=new t.vpe,this.blur=new t.vpe,this._readOnly=null,this._data=null,this._destroyed=!1}set data(n){if(n!==this._data){if(this.instance)return this.instance.setData(n),void(this._data=this.instance.getData());this._data=n}}get data(){return this._data}set readOnly(n){this.instance?this.instance.setReadOnly(n):this._readOnly=n}get readOnly(){return this.instance?this.instance.readOnly:this._readOnly}ngAfterViewInit(){y(this.editorUrl,n=>{this.namespaceLoaded.emit(n)}).then(()=>{this._destroyed||this.ngZone.runOutsideAngular(this.createEditor.bind(this))}).catch(window.console.error)}ngOnDestroy(){this._destroyed=!0,this.ngZone.runOutsideAngular(()=>{this.instance&&(this.instance.destroy(),this.instance=null)})}writeValue(n){this.data=n}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}createEditor(){const n=document.createElement(this.tagName);this.elementRef.nativeElement.appendChild(n);const i=this.config?.on?.instanceReady,e={delayIfDetached:!0,...this.config};typeof e.on>"u"&&(e.on={}),e.on.instanceReady=s=>{const l=s.editor;this.instance=l,this.readOnly=null!==this._readOnly?this._readOnly:this.instance.readOnly,this.subscribe(this.instance);const c=l.undoManager;null!==this.data?(c&&c.lock(),l.setData(this.data,{callback:()=>{this.data!==l.getData()&&l.fire(c?"change":"dataReady"),c&&c.unlock(),this.ngZone.run(()=>{"function"==typeof i&&i(s),this.ready.emit(s)})}})):this.ngZone.run(()=>{"function"==typeof i&&i(s),this.ready.emit(s)})},"inline"===this.type?CKEDITOR.inline(n,e):CKEDITOR.replace(n,e)}subscribe(n){n.on("focus",i=>{this.ngZone.run(()=>{this.focus.emit(i)})}),n.on("paste",i=>{this.ngZone.run(()=>{this.paste.emit(i)})}),n.on("afterPaste",i=>{this.ngZone.run(()=>{this.afterPaste.emit(i)})}),n.on("dragend",i=>{this.ngZone.run(()=>{this.dragEnd.emit(i)})}),n.on("dragstart",i=>{this.ngZone.run(()=>{this.dragStart.emit(i)})}),n.on("drop",i=>{this.ngZone.run(()=>{this.drop.emit(i)})}),n.on("fileUploadRequest",i=>{this.ngZone.run(()=>{this.fileUploadRequest.emit(i)})}),n.on("fileUploadResponse",i=>{this.ngZone.run(()=>{this.fileUploadResponse.emit(i)})}),n.on("blur",i=>{this.ngZone.run(()=>{this.onTouched&&this.onTouched(),this.blur.emit(i)})}),n.on("dataReady",this.propagateChange,this),n.on(this.instance.undoManager?"change":"selectionCheck",this.propagateChange,this)}propagateChange(n){this.ngZone.run(()=>{const i=this.instance.getData();"change"===n.name?this.change.emit(n):"dataReady"===n.name&&this.dataReady.emit(n),i!==this.data&&(this._data=i,this.dataChange.emit(i),this.onChange&&this.onChange(i))})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(t.SBq),t.Y36(t.R0b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ckeditor"]],inputs:{config:"config",editorUrl:"editorUrl",tagName:"tagName",type:"type",data:"data",readOnly:"readOnly"},outputs:{namespaceLoaded:"namespaceLoaded",ready:"ready",dataReady:"dataReady",change:"change",dataChange:"dataChange",dragStart:"dragStart",dragEnd:"dragEnd",drop:"drop",fileUploadResponse:"fileUploadResponse",fileUploadRequest:"fileUploadRequest",focus:"focus",paste:"paste",afterPaste:"afterPaste",blur:"blur"},features:[t._Bn([{provide:d.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}])],decls:1,vars:0,template:function(n,i){1&n&&t.YNc(0,F,0,0,"ng-template")},encapsulation:2}),o})(),E=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.u5,b.ez]]}),o})();const k=["file"];function D(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"li")(1,"div",47)(2,"input",48,49),t.NdJ("change",function(){const e=t.CHM(n).index,s=t.MAs(3),l=t.oxw();return t.KtG(l.upload(s.files,e))}),t.qZA(),t._UZ(4,"img",50),t.qZA()()}if(2&o){const n=r.$implicit;t.xp6(4),t.Q6J("src",n.img,t.LSH)}}function J(o,r){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.validationMessage.name.required," ")}}function j(o,r){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.validationMessage.title.required," ")}}function z(o,r){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.validationMessage.code.required," ")}}function Q(o,r){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.validationMessage.price.required," ")}}function V(o,r){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.validationMessage.salePrice.required," ")}}function K(o,r){if(1&o&&(t.TgZ(0,"div",51),t._uU(1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.hij(" ",n.validationMessage.discount.required," ")}}function R(o,r){if(1&o&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&o){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function L(o,r){if(1&o&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&o){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function Y(o,r){if(1&o&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&o){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function B(o,r){if(1&o&&(t.TgZ(0,"option",52),t._uU(1),t.qZA()),2&o){const n=r.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}const m=function(o){return{"is-invalid":o}},H=[{path:"",children:[{path:"manage/product-list",component:U},{path:"manage/add-product",component:(()=>{const r=class{constructor(i,a,e,s,l){this.route=i,this.router=a,this._httpService=e,this._toastr=s,this._fb=l,this.productId=0,this.submitted=!1,this.buttonText="",this.objSizes=[],this.objColors=[],this.objTags=[],this.objCategories=[],this.bigImage="assets/images/noimage.png",this.images=[{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"}],this.fileToUpload=[null,null,null,null,null],this.counter=1,this.existingImagesCount=0,this.formErrors={name:"",title:"",code:"",price:"",salePrice:"",discount:"",sizeId:"",colorId:"",categoryId:"",tagId:""},this.validationMessage={name:{required:"Name is required",minlength:"Name cannot be less than 3 char long",maxlength:"Name cannot be more than 20 char long",validCharField:"Name must contain letters and spaces only",noWhiteSpaceValidator:"Only whitespace is not allowed"},title:{required:"Title is required",minlength:"Title cannot be less than 3 char long",maxlength:"Title cannot be more than 20 char long",validCharField:"Title must contain letters and spaces only",noWhiteSpaceValidator:"Only whitespace is not allowed"},code:{required:"Code is required",minlength:"Code cannot be less than 3 char long",maxlength:"Code cannot be more than 20 char long",noWhiteSpaceValidator:"Only whitespace is not allowed"},price:{required:"Price is required",minlength:"Price cannot be less than 1 char long",maxlength:"Price cannot be more than 4 char long",validNumericField:"Price must contain numbers only",noWhiteSpaceValidator:"Only whitespace is not allowed"},salePrice:{required:"Sale Price is required",minlength:"Sale Price cannot be less than 1 char long",maxlength:"Sale Price cannot be more than 4 char long",validNumericField:"Sale Price must contain numbers only",noWhiteSpaceValidator:"Only whitespace is not allowed"},discount:{required:"Discount is required",minlength:"Discount cannot be less than 1 char long",maxlength:"Discount cannot be more than 4 char long",validNumericField:"Discount must contain numbers only",noWhiteSpaceValidator:"Only whitespace is not allowed"},sizeId:{required:"Size is required"},colorId:{required:"Color is required"},tagId:{required:"Tag is required"},categoryId:{required:"Category is required"}},this.route.queryParams.subscribe(c=>{this.productId=+c.productId||0})}ngOnInit(){this.setFormState(),this.getCategories(),this.getColors(),this.getSizes(),this.getTags(),this.productId&&this.productId>0&&(this.buttonText="Update",this.dbops=f.m.update,this.getProductById(this.productId))}setFormState(){this.buttonText="Add",this.dbops=f.m.create,this.addForm=this._fb.group({id:[0],name:["",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(20),h.hl.validCharfield,h.J4.NoWhiteSpace]],title:["",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(20),h.hl.validCharfield,h.J4.NoWhiteSpace]],code:["",[d.kI.required,d.kI.minLength(3),d.kI.maxLength(20),h.J4.NoWhiteSpace]],price:["",[d.kI.required,d.kI.minLength(1),d.kI.maxLength(4),h.Uj.validNumericfield,h.J4.NoWhiteSpace]],salePrice:["",[d.kI.required,d.kI.minLength(1),d.kI.maxLength(4),h.Uj.validNumericfield,h.J4.NoWhiteSpace]],discount:["",[d.kI.required,d.kI.minLength(1),d.kI.maxLength(4),h.Uj.validNumericfield,h.J4.NoWhiteSpace]],sizeId:["",d.kI.required],colorId:["",d.kI.required],tagId:["",d.kI.required],categoryId:["",d.kI.required],quantity:[""],isSale:[!1],isNew:[!1],shortDetails:[""],description:[""]}),this.addForm.valueChanges.subscribe(()=>{this.onValueChanges()}),this.counter=1,this.addForm.get("quantity").setValue(this.counter)}onValueChanges(){if(this.addForm)for(const i of Object.keys(this.formErrors)){this.formErrors[i]="";const a=this.addForm.get(i);if(a&&a&&a.dirty&&a.invalid){const e=this.validationMessage[i]||{},s=a.errors??{};for(const l of Object.keys(s)){const c=e[l];this.formErrors[i]+=c?c+" ":"required"===l?"This field is required. ":l+" "}}}}getProductById(i){this._httpService.get(g.N.BASE_API_PATH+"ProductMaster/GetbyId/"+i).subscribe(a=>{if(a.isSuccess&&a.data){const e=a.data,s={id:e.id??0,name:e.name??"",title:e.title??"",code:e.code??"",price:e.price??"",salePrice:e.salePrice??"",discount:e.discount??"",sizeId:e.sizeId??"",colorId:e.colorId??"",categoryId:e.categoryId??"",tagId:e.tagId??"",quantity:e.quantity??1,isSale:1===e.isSale,isNew:1===e.isNew,shortDetails:e.shortDetails??"",description:e.description??""};this.addForm.patchValue(s),this.counter=s.quantity??1,this.addForm.get("quantity").setValue(this.counter),this._httpService.get(g.N.BASE_API_PATH+"ProductMaster/GetProductPicturebyId/"+i).subscribe(l=>{if(l.isSuccess&&Array.isArray(l.data)){const c=l.data;this.existingImagesCount=c.filter(p=>p&&p.name).length;const $=[0,1,2,3,4].map(p=>c[p]&&c[p].name?{img:g.N.BASE_IMAGES_PATH+c[p].name}:{img:"assets/images/noimage.png"});this.images=$;const I=c.find(p=>p&&p.name);this.bigImage=I?g.N.BASE_IMAGES_PATH+I.name:"assets/images/product-noimage.jpg"}else l.errors&&l.errors.length>0&&this._toastr.error(l.errors[0],"Product Images")})}else this._toastr.error(a.errors&&a.errors.length>0?a.errors[0]:"Failed to load product.","Get Product")},a=>{this._toastr.error("Server error while fetching product.","Get Product")})}getSizes(){this._httpService.get(g.N.BASE_API_PATH+"SizeMaster/GetAll").subscribe(i=>{i.isSuccess?this.objSizes=i.data??[]:this._toastr.error(i.errors?.[0]??"Failed to load sizes","Add Product")},i=>this._toastr.error("Server error while fetching sizes","Add Product"))}getTags(){this._httpService.get(g.N.BASE_API_PATH+"TagMaster/GetAll").subscribe(i=>{i.isSuccess?this.objTags=i.data??[]:this._toastr.error(i.errors?.[0]??"Failed to load tags","Add Product")},i=>this._toastr.error("Server error while fetching tags","Add Product"))}getColors(){this._httpService.get(g.N.BASE_API_PATH+"ColorMaster/GetAll").subscribe(i=>{i.isSuccess?this.objColors=i.data??[]:this._toastr.error(i.errors?.[0]??"Failed to load colors","Add Product")},i=>this._toastr.error("Server error while fetching colors","Add Product"))}getCategories(){this._httpService.get(g.N.BASE_API_PATH+"Category/GetAll").subscribe(i=>{i.isSuccess?this.objCategories=i.data??[]:this._toastr.error(i.errors?.[0]??"Failed to load categories","Add Product")},i=>this._toastr.error("Server error while fetching categories","Add Product"))}get ctrl(){return this.addForm.controls}upload(i,a){if(!i||0===i.length)return;const e=i[0];if(!e)return;if(!(e.type||"").match(/image\/*/))return this._toastr.error("Please Upload a Valid Image !!","Add Product"),void(this.elfile&&this.elfile.nativeElement&&(this.elfile.nativeElement.value=""));this.fileToUpload[a]=e;const l=new FileReader;l.onload=()=>{try{const c=l.result;"string"==typeof c&&(this.images[a].img=c,this.bigImage=c)}catch{}},l.readAsDataURL(e)}increment(){this.counter=this.counter+1,this.addForm.get("quantity").setValue(this.counter)}decrement(){this.counter>1&&(this.counter=this.counter-1,this.addForm.get("quantity").setValue(this.counter))}cancelForm(){this.addForm.reset({id:0,name:"",title:"",code:"",price:"",salePrice:"",discount:"",sizeId:"",colorId:"",categoryId:"",tagId:"",quantity:"",isSale:!1,isNew:!1,shortDetails:"",description:""}),this.buttonText="Add",this.dbops=f.m.create,this.bigImage="assets/images/product-noimage.jpg",this.images=[{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"},{img:"assets/images/noimage.png"}],this.fileToUpload=[null,null,null,null,null],this.existingImagesCount=0,this.counter=1,this.router.navigate(["/products/manage/product-list"])}countValidUploads(){return this.fileToUpload.filter(i=>i instanceof File).length}Submit(){if(this.submitted=!0,this.addForm.invalid)return void this.onValueChanges();const i=this.countValidUploads(),a=this.existingImagesCount+i;if(this.dbops===f.m.create&&i<5)return void this._toastr.error("Please upload 5 images per product!","Add Product");if(this.dbops===f.m.update){if(0===this.existingImagesCount&&i<5)return void this._toastr.error("Please upload 5 images per product or keep existing 5 images on server!","Add Product");if(a<5)return void this._toastr.error(`You must provide total 5 images (existing: ${this.existingImagesCount}, uploaded: ${i}).`,"Add Product")}const e=new FormData;e.append("Id",String(this.addForm.value.id??0)),e.append("Name",String(this.addForm.value.name??"")),e.append("Title",String(this.addForm.value.title??"")),e.append("Code",String(this.addForm.value.code??"")),e.append("Price",String(this.addForm.value.price??"")),e.append("SalePrice",String(this.addForm.value.salePrice??"")),e.append("Discount",String(this.addForm.value.discount??"")),e.append("Quantity",String(this.addForm.value.quantity??this.counter)),e.append("IsSale",this.addForm.value.isSale?"1":"0"),e.append("IsNew",this.addForm.value.isNew?"1":"0"),e.append("SizeId",String(this.addForm.value.sizeId??"")),e.append("ColorId",String(this.addForm.value.colorId??"")),e.append("CategoryId",String(this.addForm.value.categoryId??"")),e.append("TagId",String(this.addForm.value.tagId??"")),e.append("ShortDetails",String(this.addForm.value.shortDetails??"")),e.append("Description",String(this.addForm.value.description??""));for(let s=0;s<this.fileToUpload.length;s++){const l=this.fileToUpload[s];l instanceof File&&e.append("Image",l,l.name)}this.dbops===f.m.create?this._httpService.postImage(g.N.BASE_API_PATH+"ProductMaster/Save/",e).subscribe(s=>{s.isSuccess?(this._toastr.success("Record Saved !!","Add Product"),this.cancelForm()):this._toastr.error(s.errors?.[0]??"Failed to save product","Add Product")},s=>this._toastr.error("Server error while saving product","Add Product")):this.dbops===f.m.update&&this._httpService.postImage(g.N.BASE_API_PATH+"ProductMaster/Update/",e).subscribe(s=>{s.isSuccess?(this._toastr.success("Record Updated !!","Add Product"),this.cancelForm()):this._toastr.error(s.errors?.[0]??"Failed to update product","Add Product")},s=>this._toastr.error("Server error while updating product","Add Product"))}ngOnDestroy(){this.objSizes=[],this.objColors=[],this.objTags=[],this.objCategories=[],this.fileToUpload=[null,null,null,null,null]}};let o=r;return r.\u0275fac=function(a){return new(a||r)(t.Y36(_.gz),t.Y36(_.F0),t.Y36(P.O),t.Y36(Z._W),t.Y36(d.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-products"]],viewQuery:function(a,e){if(1&a&&t.Gf(k,5),2&a){let s;t.iGM(s=t.CRH())&&(e.elfile=s.first)}},decls:130,vars:44,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","shadow-sm","border-0"],[1,"card-header","bg-white"],[1,"mb-0","fw-bold"],[1,"card-body"],[1,"row","product-adding"],[1,"col-xl-5"],[1,"add-product"],[1,"col-xl-9","xl-50","col-sm-6","col-9"],["alt","image banner",1,"img-fluid","image_zoom_1",3,"src"],[1,"col-xl-3","xl-50","col-sm-6","col-3"],[1,"file-upload-product"],[4,"ngFor","ngForOf"],[1,"col-xl-7"],[3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-md-6"],[1,"form-label","fw-semibold"],[1,"text-danger"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","title",1,"form-control",3,"ngClass"],["type","text","formControlName","code",1,"form-control",3,"ngClass"],["type","number","formControlName","price",1,"form-control",3,"ngClass"],["type","number","formControlName","salePrice",1,"form-control",3,"ngClass"],["type","number","formControlName","discount",1,"form-control",3,"ngClass"],["formControlName","sizeId",1,"form-select",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","categoryId",1,"form-select",3,"ngClass"],["formControlName","tagId",1,"form-select",3,"ngClass"],["formControlName","colorId",1,"form-select",3,"ngClass"],[1,"input-group","qty-group"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","text","formControlName","quantity","readonly","",1,"form-control","text-center"],[1,"col-md-6","d-flex","align-items-center","mt-2"],[1,"form-check","form-switch"],["type","checkbox","formControlName","isSale",1,"form-check-input"],[1,"form-check-label"],["type","checkbox","formControlName","isNew",1,"form-check-input"],[1,"col-12"],["rows","4","formControlName","shortDetails",1,"form-control"],["formControlName","description"],[1,"mt-4","d-flex","gap-3"],["type","submit",1,"btn","btn-primary"],[1,"box-input-file"],["type","file",1,"upload",3,"change"],["file",""],[1,"imgUpload",3,"src"],[1,"invalid-feedback"],[3,"value"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),t._uU(6,"Add Product"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",1)(12,"div",10),t._UZ(13,"img",11),t.qZA(),t.TgZ(14,"div",12)(15,"ul",13),t.YNc(16,D,5,1,"li",14),t.qZA()()()()(),t.TgZ(17,"div",15)(18,"form",16),t.NdJ("ngSubmit",function(){return e.Submit()}),t.TgZ(19,"div",17)(20,"div",18)(21,"label",19),t._uU(22,"Name "),t.TgZ(23,"span",20),t._uU(24,"*"),t.qZA()(),t._UZ(25,"input",21),t.YNc(26,J,2,1,"div",22),t.qZA(),t.TgZ(27,"div",18)(28,"label",19),t._uU(29,"Title "),t.TgZ(30,"span",20),t._uU(31,"*"),t.qZA()(),t._UZ(32,"input",23),t.YNc(33,j,2,1,"div",22),t.qZA(),t.TgZ(34,"div",18)(35,"label",19),t._uU(36,"Code "),t.TgZ(37,"span",20),t._uU(38,"*"),t.qZA()(),t._UZ(39,"input",24),t.YNc(40,z,2,1,"div",22),t.qZA(),t.TgZ(41,"div",18)(42,"label",19),t._uU(43,"Price "),t.TgZ(44,"span",20),t._uU(45,"*"),t.qZA()(),t._UZ(46,"input",25),t.YNc(47,Q,2,1,"div",22),t.qZA(),t.TgZ(48,"div",18)(49,"label",19),t._uU(50,"Sale Price "),t.TgZ(51,"span",20),t._uU(52,"*"),t.qZA()(),t._UZ(53,"input",26),t.YNc(54,V,2,1,"div",22),t.qZA(),t.TgZ(55,"div",18)(56,"label",19),t._uU(57,"Discount "),t.TgZ(58,"span",20),t._uU(59,"*"),t.qZA()(),t._UZ(60,"input",27),t.YNc(61,K,2,1,"div",22),t.qZA(),t.TgZ(62,"div",18)(63,"label",19),t._uU(64,"Size "),t.TgZ(65,"span",20),t._uU(66,"*"),t.qZA()(),t.TgZ(67,"select",28)(68,"option",29),t._uU(69,"--Select Size--"),t.qZA(),t.YNc(70,R,2,2,"option",30),t.qZA()(),t.TgZ(71,"div",18)(72,"label",19),t._uU(73,"Category "),t.TgZ(74,"span",20),t._uU(75,"*"),t.qZA()(),t.TgZ(76,"select",31)(77,"option",29),t._uU(78,"--Select Category--"),t.qZA(),t.YNc(79,L,2,2,"option",30),t.qZA()(),t.TgZ(80,"div",18)(81,"label",19),t._uU(82,"Tag "),t.TgZ(83,"span",20),t._uU(84,"*"),t.qZA()(),t.TgZ(85,"select",32)(86,"option",29),t._uU(87,"--Select Tag--"),t.qZA(),t.YNc(88,Y,2,2,"option",30),t.qZA()(),t.TgZ(89,"div",18)(90,"label",19),t._uU(91,"Color "),t.TgZ(92,"span",20),t._uU(93,"*"),t.qZA()(),t.TgZ(94,"select",33)(95,"option",29),t._uU(96,"--Select Color--"),t.qZA(),t.YNc(97,B,2,2,"option",30),t.qZA()(),t.TgZ(98,"div",18)(99,"label",19),t._uU(100,"Total Products"),t.qZA(),t.TgZ(101,"div",34)(102,"button",35),t.NdJ("click",function(){return e.decrement()}),t._uU(103,"-"),t.qZA(),t._UZ(104,"input",36),t.TgZ(105,"button",35),t.NdJ("click",function(){return e.increment()}),t._uU(106,"+"),t.qZA()()(),t.TgZ(107,"div",37)(108,"div",38),t._UZ(109,"input",39),t.TgZ(110,"label",40),t._uU(111,"Mark as Sale"),t.qZA()()(),t.TgZ(112,"div",37)(113,"div",38),t._UZ(114,"input",41),t.TgZ(115,"label",40),t._uU(116,"Mark as New"),t.qZA()()(),t.TgZ(117,"div",42)(118,"label",19),t._uU(119,"Short Details"),t.qZA(),t._UZ(120,"textarea",43),t.qZA(),t.TgZ(121,"div",42)(122,"label",19),t._uU(123,"Description"),t.qZA(),t._UZ(124,"ckeditor",44),t.qZA()(),t.TgZ(125,"div",45)(126,"button",46),t._uU(127),t.qZA(),t.TgZ(128,"button",35),t.NdJ("click",function(){return e.cancelForm()}),t._uU(129,"Cancel"),t.qZA()()()()()()()()()()),2&a&&(t.xp6(13),t.Q6J("src",e.bigImage,t.LSH),t.xp6(3),t.Q6J("ngForOf",e.images),t.xp6(2),t.Q6J("formGroup",e.addForm),t.xp6(7),t.Q6J("ngClass",t.VKq(24,m,e.submitted&&e.ctrl.name.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ctrl.name.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(26,m,e.submitted&&e.ctrl.title.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ctrl.title.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(28,m,e.submitted&&e.ctrl.code.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ctrl.code.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(30,m,e.submitted&&e.ctrl.price.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ctrl.price.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(32,m,e.submitted&&e.ctrl.salePrice.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ctrl.salePrice.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(34,m,e.submitted&&e.ctrl.discount.errors)),t.xp6(1),t.Q6J("ngIf",e.submitted&&e.ctrl.discount.errors),t.xp6(6),t.Q6J("ngClass",t.VKq(36,m,e.submitted&&e.ctrl.sizeId.errors)),t.xp6(3),t.Q6J("ngForOf",e.objSizes),t.xp6(6),t.Q6J("ngClass",t.VKq(38,m,e.submitted&&e.ctrl.categoryId.errors)),t.xp6(3),t.Q6J("ngForOf",e.objCategories),t.xp6(6),t.Q6J("ngClass",t.VKq(40,m,e.submitted&&e.ctrl.tagId.errors)),t.xp6(3),t.Q6J("ngForOf",e.objTags),t.xp6(6),t.Q6J("ngClass",t.VKq(42,m,e.submitted&&e.ctrl.colorId.errors)),t.xp6(3),t.Q6J("ngForOf",e.objColors),t.xp6(30),t.Oqu(e.buttonText))},dependencies:[b.mk,b.sg,b.O5,d._Y,d.YN,d.Kr,d.Fj,d.wV,d.Wl,d.EJ,d.JJ,d.JL,d.sg,d.u,M],styles:[".product-adding[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem}.product-adding[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .product-adding[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%], .product-adding[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:8px;padding:.5rem .75rem;transition:all .3s ease}.product-adding[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .product-adding[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus, .product-adding[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #007bff40}.product-adding[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:40px;font-size:1.2rem;transition:.2s}.product-adding[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.product-adding[_ngcontent-%COMP%]   .qty-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{text-align:center;font-weight:600}.product-adding[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{cursor:pointer}.product-adding[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:8px;padding:.5rem 1.25rem}"]}),o})()}]}];let G=(()=>{const r=class{};let o=r;return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.Bz.forChild(H),_.Bz]}),o})(),W=(()=>{const r=class{};let o=r;return r.\u0275fac=function(a){return new(a||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[b.ez,G,d.UX,v.xD,d.u5,E]}),o})()}}]);