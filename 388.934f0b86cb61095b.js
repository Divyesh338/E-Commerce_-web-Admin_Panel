"use strict";(self.webpackChunkAlibaba_Pro=self.webpackChunkAlibaba_Pro||[]).push([[388],{2388:(B,p,n)=>{n.r(p),n.d(p,{DashboardModule:()=>P});var g=n(6895),v=n(3599),m=n(2340),C=n(3172),t=n(1571),y=n(4691),D=n(7359),A=n(4054),b=n(7918),S=n(1077);function O(i,r){if(1&i&&(t.ynx(0),t.TgZ(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div",17),t._UZ(7,"app-feather-icon",18),t.qZA()(),t.TgZ(8,"div",19)(9,"span",20),t._uU(10),t.qZA(),t.TgZ(11,"h3",21),t._uU(12," \u20b9 "),t._UZ(13,"span",22),t.TgZ(14,"small"),t._uU(15,"This Year"),t.qZA()()()()()()(),t.BQk()),2&i){const c=r.$implicit,a=t.oxw();t.xp6(3),t.Q6J("ngClass",c.bg),t.xp6(4),t.Q6J("icon",c.icon)("ngClass",c.iconClass),t.xp6(3),t.Oqu(c.title),t.xp6(3),t.Q6J("CountTo",a.count[c.key])("from",a.count.from)("duration",a.count.Duration)}}function T(i,r){if(1&i&&t._UZ(0,"google-chart",23),2&i){const c=t.oxw();t.Q6J("data",c.orderStatusChart)}}const N=[{path:"default",component:(()=>{const r=class{constructor(a,e){this._http=a,this._toaster=e,this.count={from:0,Duration:0,ShoppingAmount:0,Orders:0,CashOnDelivery:0,Cancelled:0},this.orders=[],this.stats=[{title:"Orders",key:"Orders",bg:"bg-warning",icon:"navigation",iconClass:"font-secondary"},{title:"Shipping Amount",key:"ShoppingAmount",bg:"bg-secondary",icon:"box",iconClass:"font-secondary"},{title:"Cash On Delivery",key:"CashOnDelivery",bg:"bg-primary",icon:"message-square",iconClass:"font-primary"},{title:"Cancelled",key:"Cancelled",bg:"bg-danger",icon:"users",iconClass:"font-danger"}],this.columnDefs=[{field:"orderId",headerName:"Order ID"},{field:"invoiceNo",headerName:"Invoice No"},{field:"paymentStatus",headerName:"Payment Status",cellRenderer:o=>o.value},{field:"paymentMethod",headerName:"Payment Method"},{field:"orderStatus",headerName:"Order Status",cellRenderer:o=>o.value},{field:"subTotalAmount",headerName:"Sub Total"},{field:"shippingAmount",headerName:"Shipping Amount"},{field:"totalAmount",headerName:"Total Amount"},{field:"paymentDate",headerName:"Payment Date",valueFormatter:o=>{const l=new Date(o.value);return l.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})+" "+l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}],this.defaultColDef={sortable:!0,filter:!0,resizable:!0},this.rowData=[]}ngOnInit(){this.getNetFigure(),this.getOrdersData(),this.GetOrderStatusChart()}getNetFigure(){this._http.get(m.N.BASE_API_PATH+"PaymentMaster/GetReportNetFigure").subscribe(a=>{if(a.isSuccess&&a.data.length>0){const e=a.data[0];this.count.ShoppingAmount=e.shippingAmount,this.count.Orders=e.orders,this.count.CashOnDelivery=e.cashOnDelivery,this.count.Cancelled=e.cancelled}else this._toaster.error(a.errors?.[0]||"Error fetching data","Dashboard")})}onGridReady(a){this.agGrid.api=a.api,this.agGrid.columnApi=a.columnApi,this._http.get(m.N.BASE_API_PATH+"PaymentMaster/GetReportManageOrder").subscribe(e=>{e.isSuccess?this.rowData=e.data:this._toaster.error(e.errors?.[0]||"Error fetching orders","Dashboard")})}onCellClicked(a){}getOrdersData(){this._http.get(m.N.BASE_API_PATH+"PaymentMaster/GetReportManageOrder").subscribe(a=>{a.isSuccess?this.orders=a.data:this._toaster.error(a.errors[0],"Dashboard")})}GetOrderStatusChart(){let a=[],e=["Date"];this._http.get(m.N.BASE_API_PATH+"PaymentMaster/GetChartOrderStatus").subscribe(o=>{if(o.isSuccess){let d=o.data,G=d.map(s=>s.date).filter((s,h,u)=>u.indexOf(s)===h),f=d.map(s=>s.orderStatus).filter((s,h,u)=>u.indexOf(s)===h);for(let s of f)e.push(s);a.push(e);for(let s of G){e=[],e.push(s);for(let h of f)e.push(0);for(let h in f)for(let u in d)f[h]===d[u].orderStatus&&s===d[u].date&&(e[parseInt(h)+1]=d[u].counts);a.push(e)}this.orderStatusChart={chartType:"ColumnChart",dataTable:a,options:{legend:{position:"none"},bars:"vertical",vAxis:{format:"decimal"},height:340,width:"100%",colors:["#ff7f83","#a5a5a5"],backgroundColor:"transparent"}}}else this._toaster.error(o.errors[0],"Dashboard")})}};let i=r;return r.\u0275fac=function(e){return new(e||r)(t.Y36(y.O),t.Y36(D._W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dashboard"]],viewQuery:function(e,o){if(1&e&&t.Gf(C.N8,5),2&e){let l;t.iGM(l=t.CRH())&&(o.agGrid=l.first)}},decls:18,vars:6,consts:[[1,"container-fluid"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-xl-12","xl-100"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"table-responsive"],[1,"ag-theme-alpine",2,"width","100%","height","500px",3,"rowData","columnDefs","defaultColDef","pagination","gridReady","cellClicked"],[1,"col-sm-12"],[1,"card-body","sell-graph"],[3,"ngIf"],[1,"col-xl-3","col-md-6","xl-50"],[1,"card","o-hidden","widget-cards"],[1,"card-body",3,"ngClass"],[1,"media","static-top-widget","row"],[1,"icons-widgets","col-4"],[1,"align-self-center","text-center"],[3,"icon","ngClass"],[1,"media-body","col-8"],[1,"m-0"],[1,"mb-0"],[1,"counter",3,"CountTo","from","duration"],[3,"data"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,O,16,7,"ng-container",2),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5"),t._uU(7,"Latest Orders"),t.qZA()(),t.TgZ(8,"div",6)(9,"div",7)(10,"ag-grid-angular",8),t.NdJ("gridReady",function(d){return o.onGridReady(d)})("cellClicked",function(d){return o.onCellClicked(d)}),t.qZA()()()()(),t.TgZ(11,"div",9)(12,"div",4)(13,"div",5)(14,"h5"),t._uU(15,"Order Status"),t.qZA()(),t.TgZ(16,"div",10),t.YNc(17,T,1,1,"ng-template",11),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",o.stats),t.xp6(8),t.Q6J("rowData",o.rowData)("columnDefs",o.columnDefs)("defaultColDef",o.defaultColDef)("pagination",!0),t.xp6(7),t.Q6J("ngIf",o.orderStatusChart))},dependencies:[g.mk,g.sg,g.O5,A.T,C.N8,b.x,S.P4]}),i})()}];let x=(()=>{const r=class{};let i=r;return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[v.Bz.forChild(N),v.Bz]}),i})();var Z=n(4466);let P=(()=>{const r=class{};let i=r;return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.ez,x,Z.m]}),i})()}}]);